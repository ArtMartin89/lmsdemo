# Исправление ошибки 502 Bad Gateway

## Проблема
502 Bad Gateway означает, что nginx не может подключиться к API контейнеру.

## Решение

### Шаг 1: Перезапустите все контейнеры

```bash
docker-compose down
docker-compose up -d
```

### Шаг 2: Проверьте, что API запущен

```bash
docker-compose ps
```

Все сервисы должны быть в статусе "Up (healthy)" или "Up".

### Шаг 3: Проверьте логи API

```bash
docker-compose logs api --tail=50
```

Ищите ошибки подключения к базе данных или Redis.

### Шаг 4: Проверьте, что API доступен напрямую

Откройте в браузере: http://localhost:8000/health

Должен вернуться: `{"status": "healthy"}`

### Шаг 5: Инициализируйте базу данных

```bash
docker-compose exec api python check_and_init.py
```

### Шаг 6: Проверьте сеть Docker

```bash
docker network ls
docker network inspect lms_demo_pyth_docker_default
```

Убедитесь, что все контейнеры в одной сети.

### Шаг 7: Проверьте nginx конфигурацию

```bash
docker-compose exec frontend cat /etc/nginx/conf.d/default.conf
```

Должно быть: `proxy_pass http://api:8000;`

## Если ничего не помогает

1. Полностью пересоздайте контейнеры:
```bash
docker-compose down -v
docker-compose build --no-cache
docker-compose up -d
```

2. Подождите 30 секунд для полного запуска

3. Инициализируйте БД:
```bash
docker-compose exec api python check_and_init.py
```

4. Проверьте логи:
```bash
docker-compose logs api
docker-compose logs frontend
```


